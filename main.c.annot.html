<!DOCTYPE html>
<html>
<head>
<title>Annotated source listing for\/auto/d/de-sousa/SIM203/arbres-couvrants/main.c</title>
<style>
*{margin:0;padding:0}body,html{color:#000;background:#fff;height:100%;width:100%;font-family:"Lucida Sans Unicode","Lucida Grande",sans-serif;overflow:hidden}.header{position:absolute;top:0;height:50px;width:100%;background:#0071c5;color:#fff}.content{position:absolute;left:0;right:0;width:75%;top:50px;bottom:40px;margin:0 auto}.content .inner_header{height:30px;background:#ddd}.content .scrollable_right{position:absolute;left:300px;bottom:0;top:30px;right:0;overflow-y:scroll;padding:3px 5px}.content .scrollable_left{overflow-y:scroll;position:absolute;width:285px;top:30px;bottom:0;padding:3px 5px;border-left:thick solid #ddd}.footer{position:absolute;bottom:0;height:40px;width:100%;background:#0071c5;text-align:center;color:#fff}.header .title{position:relative;padding:7px 5px;left:12.5%;color:#fff;font-size:20px;font-weight:bolder;text-shadow:1px 1px #000}.content .title{padding:3px 5px;color:#0071c5;font-size:14px;font-weight:bolder}.footer .title{padding:10px;font-size:12px}.content .scrollable_left .annot_link{font-size:14px;color:#0071c5}.content .scrollable_left .annot_link:visited {color:purple;text-decoration:underline;}.footnote{color: #0071c5;}</style>
</head>
<body>
<div class="header">
<div class="title">Annotated source listing with compiler optimization reports</div>
</div>
<div class="content">
<div class="inner_header">
<div class="title">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c
</div>
</div><div class="scrollable_left"><h5 style="color:#032640">Routines with optimization reports</h5><a class="annot_link" href="#l26">main()</a><br/><a class="annot_link" href="#l21">poids(ListOfCities&nbsp;*,&nbsp;int,&nbsp;int)</a><br/></div><div class="scrollable_right" id="code_layout">
 <pre style="border-width:0px;"></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">
INLINING OPTION VALUES:
  -inline-factor: 100
  -inline-min-size: 30
  -inline-max-size: 230
  -inline-max-total-size: 2000
  -inline-max-per-routine: 10000
  -inline-max-per-compile: 500000

</pre>
<pre style="border-width:0px;"><a id="l1">1	// Compilation:
</a><a id="l2">2	//    icc -std=c99 -mkl -qopenmp main.c citiesReader.c
</a><a id="l3">3	//    icc -std=c99 -mkl -qopenmp -qopt-report=1 -qopt-report-annotate=html main.c citiesReader.c
</a><a id="l4">4	// Execution:
</a><a id="l5">5	//   ./a.out
</a><a id="l6">6	
</a><a id="l7">7	#include "citiesReader.h"
</a><a id="l8">8	
</a><a id="l9">9	#include &lt;stdlib.h&gt;
</a><a id="l10">10	#include &lt;stdio.h&gt;
</a><a id="l11">11	#include &lt;string.h&gt;
</a><a id="l12">12	#include &lt;stdbool.h&gt;
</a><a id="l13">13	#include &lt;float.h&gt;
</a><a id="l14">14	#include &lt;math.h&gt;
</a><a id="l15">15	#include &lt;mkl.h&gt;
</a><a id="l16">16	
</a><a id="l17">17	#define R 6378
</a><a id="l18">18	#define pi 3.14
</a><a id="l19">19	#define conversion pi/180
</a><a id="l20">20	
</a><a id="l21">21	inline float poids(ListOfCities* cities, int a, int b){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">
NEVER EMIT DEFINITION FUNCTION: (poids(ListOfCities *, int, int))<a class="annot_link" href="main.c.annot.html#l21">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(21,55)</a>

</pre>
<pre style="border-width:0px;"><a id="l22">22	  if(a==b) return 0;
</a><a id="l23">23	  return R*acos( sin(cities-&gt;lat[a] * conversion)*sin(cities-&gt;lat[b]*conversion) + cos((cities-&gt;lon[a] - cities-&gt;lon[b])*conversion)*cos(cities-&gt;lat[a]*conversion)*cos(cities-&gt;lat[b]*conversion) );
</a><a id="l24">24	}
</a><a id="l25">25	
</a><a id="l26">26	int main() {
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">
INLINE REPORT: (main()) [1] <a class="annot_link" href="main.c.annot.html#l26">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(26,12)</a>
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l62">(62,17)</a> poids(ListOfCities *, int, int)
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l81">(81,44)</a> poids(ListOfCities *, int, int)
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l82">(82,21)</a> poids(ListOfCities *, int, int)
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l109">(109,28)</a> poids(ListOfCities *, int, int)
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l134">(134,15)</a> poids(ListOfCities *, int, int)
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l154">(154,42)</a> poids(ListOfCities *, int, int)
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l155">(155,19)</a> poids(ListOfCities *, int, int)
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l180">(180,22)</a> poids(ListOfCities *, int, int)
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l228">(228,23)</a> atoi(const char *)
     {{ Inlining of routines from system headers is omitted. Use -qopt-report=3 to view full report. }}
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l230">(230,25)</a> atof(const char *)
     {{ Inlining of routines from system headers is omitted. Use -qopt-report=3 to view full report. }}
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l232">(232,25)</a> atof(const char *)
     {{ Inlining of routines from system headers is omitted. Use -qopt-report=3 to view full report. }}
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l239">(239,24)</a> atoi(const char *)
     {{ Inlining of routines from system headers is omitted. Use -qopt-report=3 to view full report. }}
  -&gt; INLINE: <a class="annot_link" href="main.c.annot.html#l241">(241,24)</a> atoi(const char *)
     {{ Inlining of routines from system headers is omitted. Use -qopt-report=3 to view full report. }}


Fusion of IFs performed in main at line 22

Fusion of IFs performed in main at line 22
<a class="annot_link" href="main.c.annot.html#l26">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(26,12)</a>:remark #34051: REGISTER ALLOCATION : [main] /auto/d/de-sousa/SIM203/arbres-couvrants/main.c:26

    Hardware registers
        Reserved     :    2[ rsp rip]
        Available    :   39[ rax rdx rcx rbx rbp rsi rdi r8-r15 mm0-mm7 zmm0-zmm15]
        Callee-save  :    6[ rbx rbp r12-r15]
        Assigned     :   29[ rax rdx rcx rbx rsi rdi r8-r15 zmm0-zmm6 zmm8-zmm15]
        
    Routine temporaries
        Total         :    1093
            Global    :     383
            Local     :     710
        Regenerable   :     235
        Spilled       :      65
        
    Routine stack
        Variables     :     866 bytes*
            Reads     :      41 [1.24e+00 ~ 1.2%]
            Writes    :      29 [2.84e+00 ~ 2.8%]
        Spills        :     576 bytes*
            Reads     :     125 [3.69e+00 ~ 3.7%]
            Writes    :      99 [4.44e+00 ~ 4.4%]
    
    Notes
    
        *Non-overlapping variables and spills may share stack space,
         so the total stack size might be less than this.
    

</pre>
<pre style="border-width:0px;"><a id="l27">27	
</a><a id="l28">28	  int popMin;
</a><a id="l29">29	  printf("Minimal population? ");
</a><a id="l30">30	  scanf("%i", &popMin);
</a><a id="l31">31	
</a><a id="l32">32	// allocation des variables
</a><a id="l33">33	  ListOfCities* cities;
</a><a id="l34">34	  float taille_reseau = 0;
</a><a id="l35">35	  int nb_villes = 0;
</a><a id="l36">36	  double time = 0;
</a><a id="l37">37	  bool* dansS = malloc(1024*sizeof(bool));
</a><a id="l38">38	  int* voisin = malloc(1024*sizeof(int));
</a><a id="l39">39	  float* dist = malloc(1024*sizeof(float));
</a><a id="l40">40	
</a><a id="l41">41	  for(int dpt = 1; dpt&lt;96; dpt++){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">


Non-optimizable loops:


LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l41">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(41,3)</a>
   remark #15543: loop was not vectorized: loop with function call not considered an optimization candidate.

   LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l67">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(67,5)</a>
      remark #15543: loop was not vectorized: loop with function call not considered an optimization candidate.
   LOOP END

   LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l102">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(102,5)</a>
      remark #15523: loop was not vectorized: loop control variable i was found, but loop iteration count cannot be computed before executing the loop
   LOOP END

   LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l108">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(108,5)</a>
      remark #15523: loop was not vectorized: loop control variable i was found, but loop iteration count cannot be computed before executing the loop
   LOOP END
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l42">42	//-----------------------------------------------------------------
</a><a id="l43">43	//--- READING cities from departement = dpt
</a><a id="l44">44	//-----------------------------------------------------------------
</a><a id="l45">45	    char outputFile[50];
</a><a id="l46">46	    sprintf(outputFile,"resuCities_%d.dat",dpt);
</a><a id="l47">47	    cities = citiesReader(popMin,dpt,outputFile);
</a><a id="l48">48	    nb_villes += cities-&gt;number;
</a><a id="l49">49	    //TEMPS DE CALCUL: entr√©e dans l'algo
</a><a id="l50">50	    unsigned MKL_INT64 t0;
</a><a id="l51">51	    mkl_get_cpu_clocks(&t0);
</a><a id="l52">52	//-----------------------------------------------------------------
</a><a id="l53">53	//--- COMPUTING graph
</a><a id="l54">54	//----------------------------------------------------------------- 
</a><a id="l55">55	    //Initialisation
</a><a id="l56">56	    dansS[0] = true;  //On d√©marre du sommet 0
</a><a id="l57">57	    dist[0] = 0;      //dist(0,0) = 0
</a><a id="l58">58	
</a><a id="l59">59	    //#pragma omp parallel for
</a><a id="l60">60	    for(int i = 0; i &lt; cities-&gt;number; i++){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l60">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(60,5)</a>
&lt;Peeled loop for vectorization, Distributed chunk1&gt;
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l60">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(60,5)</a>
&lt;Distributed chunk1&gt;
   remark #25426: Loop Distributed (3 way) 
   remark #15301: PARTIAL LOOP WAS VECTORIZED
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l60">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(60,5)</a>
&lt;Remainder loop for vectorization, Distributed chunk1&gt;
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l60">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(60,5)</a>
&lt;Distributed chunk2&gt;
   remark #25258: Invariant Condition eliminated(Loop at level 1 peeled) at line 22 
   remark #25260: Invariant Condition eliminated(Proven False) at line 22
   remark #15301: PARTIAL LOOP WAS VECTORIZED
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l60">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(60,5)</a>
&lt;Remainder loop for vectorization, Distributed chunk2&gt;
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l60">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(60,5)</a>
&lt;Peeled loop for vectorization, Distributed chunk3&gt;
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l60">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(60,5)</a>
&lt;Distributed chunk3&gt;
   remark #15301: PARTIAL LOOP WAS VECTORIZED
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l60">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(60,5)</a>
&lt;Remainder loop for vectorization, Distributed chunk3&gt;
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l61">61	      dansS[i] = false;
</a><a id="l62">62	      dist[i] = poids(cities,0,i);
</a><a id="l63">63	      voisin[i] = 0;
</a><a id="l64">64	    }
</a><a id="l65">65	    //It√©rations
</a><a id="l66">66	    int k = 0;
</a><a id="l67">67	    while(k &lt; cities-&gt;number - 2){
</a><a id="l68">68	      //Trouver i tels que (dansS[i]=false) et (dist[i] est minimal)
</a><a id="l69">69	      float minDist = FLT_MAX;
</a><a id="l70">70	      int i = 0;
</a><a id="l71">71	      for(int j = 1; j &lt; cities-&gt;number; j++){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l71">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(71,7)</a>
   remark #15344: loop was not vectorized: vector dependence prevents vectorization. First dependence is shown below. Use level 5 report for details
   remark #15346: vector dependence: assumed ANTI dependence between minDist (72:9) and minDist (73:11)
   remark #25439: unrolled with remainder by 2  
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l71">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(71,7)</a>
&lt;Remainder&gt;
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l72">72	        if( dansS[j] == false && dist[j] &lt; minDist){
</a><a id="l73">73	          minDist = dist[j];
</a><a id="l74">74	          i = j;
</a><a id="l75">75	        }
</a><a id="l76">76	      }
</a><a id="l77">77	      dansS[i] = true;
</a><a id="l78">78	      
</a><a id="l79">79	      #pragma omp parallel for
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">
OpenMP Construct at <a class="annot_link" href="main.c.annot.html#l79">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(79,7)</a>
remark #16201: OpenMP DEFINED REGION WAS PARALLELIZED

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l79">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(79,7)</a>
   remark #15335: loop was not vectorized: vectorization possible but seems inefficient. Use vector always directive or -vec-threshold0 to override 
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l80">80	      for(int j = 0; j &lt; cities-&gt;number; j++){
</a><a id="l81">81	        if( dansS[j] == false && dist[j] &gt; poids(cities,i,j)){
</a><a id="l82">82	          dist[j] = poids(cities,i,j);
</a><a id="l83">83	          voisin[j] = i;
</a><a id="l84">84	        }
</a><a id="l85">85	      }
</a><a id="l86">86	      k ++;
</a><a id="l87">87	    }
</a><a id="l88">88	//-----------------------------------------------------------------
</a><a id="l89">89	//--- GRAPH COMPUTED
</a><a id="l90">90	//-----------------------------------------------------------------
</a><a id="l91">91	    //TEMPS DE CALCUL: sortie de l'algo
</a><a id="l92">92	    unsigned MKL_INT64 t1;
</a><a id="l93">93	    mkl_get_cpu_clocks(&t1);
</a><a id="l94">94	    time += (double)(t1-t0)/mkl_get_clocks_frequency();
</a><a id="l95">95	
</a><a id="l96">96	//-----------------------------------------------------------------
</a><a id="l97">97	//--- WRITING GRAPH for cities from departement = dpt
</a><a id="l98">98	//----------------------------------------------------------------- 
</a><a id="l99">99	    char filename[50];
</a><a id="l100">100	    sprintf(filename,"resuGraph_%d.dat",dpt);
</a><a id="l101">101	    FILE* fileOut = fopen(filename, "w");
</a><a id="l102">102	    for(int i=0; i&lt;cities-&gt;number; i++){
</a><a id="l103">103	      fprintf(fileOut, "%i %i\n", i, voisin[i]);
</a><a id="l104">104	    }
</a><a id="l105">105	    fclose(fileOut);
</a><a id="l106">106	
</a><a id="l107">107	    float taille_reseau_dpt = 0;
</a><a id="l108">108	    for(int i = 0; i &lt; cities-&gt;number; i++){ 
</a><a id="l109">109	      taille_reseau_dpt += poids(cities,i,voisin[i]);
</a><a id="l110">110	      if(dpt==0 && i ==0) printf("taille reseau dpt %i ville %i= %f\n",dpt,i,taille_reseau_dpt);
</a><a id="l111">111	    }
</a><a id="l112">112	    taille_reseau += taille_reseau_dpt;
</a><a id="l113">113	  }
</a><a id="l114">114	
</a><a id="l115">115	
</a><a id="l116">116	//-----------------------------------------------------------------
</a><a id="l117">117	//--- READING bigger city from each departement
</a><a id="l118">118	//-----------------------------------------------------------------                             
</a><a id="l119">119	  cities = bigcitiesReader();
</a><a id="l120">120	
</a><a id="l121">121	  //TEMPS DE CALCUL: entr√©e dans l'algo
</a><a id="l122">122	  unsigned MKL_INT64 t2;
</a><a id="l123">123	  mkl_get_cpu_clocks(&t2);
</a><a id="l124">124	
</a><a id="l125">125	//-----------------------------------------------------------------
</a><a id="l126">126	//--- COMPUTING graph
</a><a id="l127">127	//-----------------------------------------------------------------
</a><a id="l128">128	  //Initialisation
</a><a id="l129">129	  dansS[0] = true;  //On d√©marre du sommet 0
</a><a id="l130">130	  dist[0] = 0;      //dist(0,0) = 0
</a><a id="l131">131	  //#pragma omp parallel for
</a><a id="l132">132	  for(int i = 0; i &lt; cities-&gt;number; i++){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l132">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(132,3)</a>
&lt;Peeled loop for vectorization, Distributed chunk1&gt;
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l132">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(132,3)</a>
&lt;Distributed chunk1&gt;
   remark #25426: Loop Distributed (3 way) 
   remark #15301: PARTIAL LOOP WAS VECTORIZED
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l132">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(132,3)</a>
&lt;Remainder loop for vectorization, Distributed chunk1&gt;
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l132">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(132,3)</a>
&lt;Distributed chunk2&gt;
   remark #25258: Invariant Condition eliminated(Loop at level 1 peeled) at line 22 
   remark #25260: Invariant Condition eliminated(Proven False) at line 22
   remark #15301: PARTIAL LOOP WAS VECTORIZED
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l132">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(132,3)</a>
&lt;Remainder loop for vectorization, Distributed chunk2&gt;
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l132">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(132,3)</a>
&lt;Peeled loop for vectorization, Distributed chunk3&gt;
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l132">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(132,3)</a>
&lt;Distributed chunk3&gt;
   remark #15301: PARTIAL LOOP WAS VECTORIZED
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l132">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(132,3)</a>
&lt;Remainder loop for vectorization, Distributed chunk3&gt;
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l133">133	    dansS[i] = false;
</a><a id="l134">134	    dist[i] = poids(cities,0,i);
</a><a id="l135">135	    voisin[i] = 0;
</a><a id="l136">136	  }
</a><a id="l137">137	  
</a><a id="l138">138	  //It√©rations
</a><a id="l139">139	  int k = 0;
</a><a id="l140">140	  while(k &lt; cities-&gt;number - 2){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l140">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(140,3)</a>
   remark #15543: loop was not vectorized: loop with function call not considered an optimization candidate.
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l141">141	    //Trouver i tels que (dansS[i]=false) et (dist[i] est minimal)
</a><a id="l142">142	    float minDist = FLT_MAX;
</a><a id="l143">143	    int i = 0;
</a><a id="l144">144	    for(int j = 1; j &lt; cities-&gt;number; j++){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l144">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(144,5)</a>
   remark #15344: loop was not vectorized: vector dependence prevents vectorization. First dependence is shown below. Use level 5 report for details
   remark #15346: vector dependence: assumed ANTI dependence between minDist (145:7) and minDist (146:9)
   remark #25439: unrolled with remainder by 2  
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l144">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(144,5)</a>
&lt;Remainder&gt;
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l145">145	      if( dansS[j] == false && dist[j] &lt; minDist){
</a><a id="l146">146	        minDist = dist[j];
</a><a id="l147">147	        i = j;
</a><a id="l148">148	      }
</a><a id="l149">149	    }
</a><a id="l150">150	    dansS[i] = true;
</a><a id="l151">151	    
</a><a id="l152">152	    #pragma omp parallel for
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">
OpenMP Construct at <a class="annot_link" href="main.c.annot.html#l152">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(152,5)</a>
remark #16201: OpenMP DEFINED REGION WAS PARALLELIZED

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l152">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(152,5)</a>
   remark #15335: loop was not vectorized: vectorization possible but seems inefficient. Use vector always directive or -vec-threshold0 to override 
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l153">153	    for(int j = 0; j &lt; cities-&gt;number; j++){
</a><a id="l154">154	      if( dansS[j] == false && dist[j] &gt; poids(cities,i,j)){
</a><a id="l155">155	        dist[j] = poids(cities,i,j);
</a><a id="l156">156	        voisin[j] = i;
</a><a id="l157">157	      }
</a><a id="l158">158	    }
</a><a id="l159">159	    k ++;
</a><a id="l160">160	  }
</a><a id="l161">161	//-----------------------------------------------------------------
</a><a id="l162">162	//--- GRAPH COMPUTED
</a><a id="l163">163	//-----------------------------------------------------------------
</a><a id="l164">164	  //TEMPS DE CALCUL: sortie de l'algo
</a><a id="l165">165	  unsigned MKL_INT64 t3;
</a><a id="l166">166	  mkl_get_cpu_clocks(&t3);
</a><a id="l167">167	  //TEMPS DE CALCUL TOTAL
</a><a id="l168">168	  double duration = (double)(t3 - t2 + time)/mkl_get_clocks_frequency()/1e9;
</a><a id="l169">169	
</a><a id="l170">170	//-----------------------------------------------------------------
</a><a id="l171">171	//--- WRITING GRAPH for big cities
</a><a id="l172">172	//-----------------------------------------------------------------
</a><a id="l173">173	  FILE* fileOut = fopen("resuGraph_bigcities.dat", "w");
</a><a id="l174">174	  for(int i = 0; i&lt;cities-&gt;number; i++){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l174">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(174,3)</a>
   remark #15523: loop was not vectorized: loop control variable i was found, but loop iteration count cannot be computed before executing the loop
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l175">175	    fprintf(fileOut, "%i %i\n", i, voisin[i]);
</a><a id="l176">176	  }
</a><a id="l177">177	  fclose(fileOut);
</a><a id="l178">178	  
</a><a id="l179">179	  for(int i = 0; i &lt; cities-&gt;number; i++){ 
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l179">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(179,3)</a>
   remark #15300: LOOP WAS VECTORIZED
LOOP END

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l179">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(179,3)</a>
&lt;Remainder loop for vectorization&gt;
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l180">180	    taille_reseau += poids(cities,i,voisin[i]);
</a><a id="l181">181	  }
</a><a id="l182">182	//-----------------------------------------------------------------
</a><a id="l183">183	//--- DEALLOCATE arrays
</a><a id="l184">184	//-----------------------------------------------------------------
</a><a id="l185">185	  free(dansS);
</a><a id="l186">186	  free(voisin);
</a><a id="l187">187	  free(dist);
</a><a id="l188">188	
</a><a id="l189">189	  free(cities-&gt;dpt);
</a><a id="l190">190	  free(cities-&gt;name);
</a><a id="l191">191	  free(cities-&gt;pop);
</a><a id="l192">192	  free(cities-&gt;lon);
</a><a id="l193">193	  free(cities-&gt;lat);
</a><a id="l194">194	  free(cities);
</a><a id="l195">195	
</a><a id="l196">196	//---------------------------------------------------------------
</a><a id="l197">197	//--- R√©union de tous les fichiers
</a><a id="l198">198	//---------------------------------------------------------------
</a><a id="l199">199	  FILE* citiesOutputFile = NULL;
</a><a id="l200">200	  citiesOutputFile = fopen("resuCities.dat","w");
</a><a id="l201">201	  FILE* graphOutputFile = NULL;
</a><a id="l202">202	  graphOutputFile = fopen("resuGraph.dat","w");
</a><a id="l203">203	  
</a><a id="l204">204	  if(citiesOutputFile != NULL && graphOutputFile != NULL){
</a><a id="l205">205	    int n = 0;
</a><a id="l206">206	    int nbVilles = 0;
</a><a id="l207">207	    for(int dpt = 1; dpt &lt; 96; dpt ++){
</a></pre><pre style="display:inline-block;padding:5px;margin-right:3px;font-color:#AEAEAEk;font-size:11px;border-radius:12px;border:1px solid #dddddd; background:#fbfbfb">

LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l207">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(207,5)</a>
   remark #15532: loop was not vectorized: compile time constraints prevent loop optimization. Consider using -O3.

   LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l226">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(226,9)</a>
      remark #15523: loop was not vectorized: loop control variable nbVilles was found, but loop iteration count cannot be computed before executing the loop
   LOOP END

   LOOP BEGIN at <a class="annot_link" href="main.c.annot.html#l237">/auto/d/de-sousa/SIM203/arbres-couvrants/main.c(237,9)</a>
      remark #15521: loop was not vectorized: loop control variable was not identified. Explicitly compute the iteration count before executing the loop or try using canonical loop form from OpenMP specification
   LOOP END
LOOP END
</pre>
<pre style="border-width:0px;"><a id="l208">208	      char citiesFilename[64];
</a><a id="l209">209	      sprintf(citiesFilename,"resuCities_%d.dat",dpt);
</a><a id="l210">210	      char graphFilename[64];
</a><a id="l211">211	      sprintf(graphFilename,"resuGraph_%d.dat",dpt);
</a><a id="l212">212	      //printf("== Merging cities file with population &gt;= %i and department = %i from %s ==\n", popMin, dpt, citiesFilename);
</a><a id="l213">213	      //printf("== Merging graph  file with population &gt;= %i and department = %i from %s ==\n", popMin, dpt, graphFilename);
</a><a id="l214">214	
</a><a id="l215">215	      FILE* citiesInputFile = NULL;
</a><a id="l216">216	      citiesInputFile = fopen(citiesFilename, "r");
</a><a id="l217">217	      FILE* graphInputFile = NULL;
</a><a id="l218">218	      graphInputFile = fopen(graphFilename, "r");
</a><a id="l219">219	      
</a><a id="l220">220	      if(citiesInputFile != NULL && graphInputFile != NULL){
</a><a id="l221">221	        char line[512];
</a><a id="l222">222	        const char s[2] = " ";
</a><a id="l223">223	        char *token;
</a><a id="l224">224	
</a><a id="l225">225	        nbVilles = 0;
</a><a id="l226">226	        while(fgets(line, 512, citiesInputFile) != NULL){
</a><a id="l227">227	          token = strtok(line, s);
</a><a id="l228">228	          int myPop = atoi(token);
</a><a id="l229">229	          token = strtok(NULL, s);
</a><a id="l230">230	          float myLon = atof(token);
</a><a id="l231">231	          token = strtok(NULL, s);
</a><a id="l232">232	          float myLat = atof(token);
</a><a id="l233">233	
</a><a id="l234">234	          fprintf(citiesOutputFile, "%i %f %f\n", myPop, myLon, myLat);
</a><a id="l235">235	          nbVilles ++;
</a><a id="l236">236	        }
</a><a id="l237">237	        while(fgets(line, 512, graphInputFile) != NULL){
</a><a id="l238">238	          token = strtok(line, s);
</a><a id="l239">239	          int villeA = atoi(token);
</a><a id="l240">240	          token = strtok(NULL, s);
</a><a id="l241">241	          int villeB = atoi(token);
</a><a id="l242">242	          fprintf(graphOutputFile, "%i %i\n", villeA+n, villeB+n);
</a><a id="l243">243	        }
</a><a id="l244">244	      }
</a><a id="l245">245	      n += nbVilles;
</a><a id="l246">246	      if (remove(citiesFilename) != 0) {
</a><a id="l247">247	        printf("The file %s is not deleted.",citiesFilename);
</a><a id="l248">248	      }
</a><a id="l249">249	      if (remove(graphFilename) != 0) {
</a><a id="l250">250	        printf("The file %s is not deleted.",graphFilename);
</a><a id="l251">251	      }
</a><a id="l252">252	    }
</a><a id="l253">253	  }
</a><a id="l254">254	//-----------------------------------------------------------------
</a><a id="l255">255	//--- FICHIERS DPT REUNIS DANS resuGraph.dat et resuCities.dat
</a><a id="l256">256	//-----------------------------------------------------------------
</a><a id="l257">257	
</a><a id="l258">258	  printf("\t%i cities: \n", nb_villes);
</a><a id="l259">259	  printf("Taille du reseau: %1.0f km\n",taille_reseau);
</a><a id="l260">260	  printf("Time is %fs\n ",duration);
</a><a id="l261">261	
</a><a id="l262">262	  return 0;
</a><a id="l263">263	}
</a></pre> </div></div>
<div class="footer">
<div class="title">Intel Corporation 2015
</div>
</div>
</body>
</html>
